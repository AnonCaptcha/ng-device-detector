!function(e){"use strict";e.module("ng.deviceDetector",[]).constant("BROWSERS",{CHROME:"chrome",FIREFOX:"firefox",SAFARI:"safari",OPERA:"opera",IE:"ie",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).constant("DEVICES",{ANDROID:"android",IPAD:"ipad",IPHONE:"iphone",IPOD:"ipod",BLACKBERRY:"blackberry",FIREFOXOS:"firefoxos",WINDOWSPHONE:"windows-phone",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).constant("OS",{WINDOWS:"windows",MAC:"mac",IOS:"ios",ANDROID:"android",LINUX:"linux",UNIX:"unix",FIREFOXOS:"firefoxos",WINDOWSPHONE:"windows-phone",PS4:"ps4",VITA:"vita",UNKNOWN:"unknown"}).service("detectUtils",["deviceDetector","DEVICES","BROWSERS","OS",function(e,n,i,r){var o=e;this.isMobile=function(){return"unknown"!==o.device},this.isAndroid=function(){return o.device===n.ANDROID||o.OS===r.ANDROID},this.isIOS=function(){return o.os===r.IOS||o.device===n.IPOD||o.device===n.IPHONE}}]).factory("deviceDetector",["$window","DEVICES","BROWSERS","OS",function(e,n,i,r){function o(e,n){return n instanceof RegExp?n.test(e):n&&Array.isArray(n.and)?n.and.every(function(n){return o(e,n)}):n&&Array.isArray(n.or)?n.or.some(function(n){return o(e,n)}):n&&n.not?!o(e,n.not):!1}var t={WINDOWS:{and:[/\bWindows\b/,{not:/\bWindows Phone\b/}]},MAC:/\bMac OS\b/,IOS:{or:[/\biPad\b/,/\biPhone\b/,/\biPod\b/]},ANDROID:/\bAndroid\b/,LINUX:/\bLinux\b/,UNIX:/\bUNIX\b/,FIREFOXOS:{and:[/\bFirefox\b/,/Mobile\b/]},WINDOWSPHONE:/\bIEMobile\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},O={CHROME:{or:[/\bChrome\b/,/\bCriOS\b/]},FIREFOX:/\bFirefox\b/,SAFARI:/^((?!CriOS).)*\Safari\b.*$/,OPERA:/Opera\b/,IE:{and:[/\bMSIE\b/,/\bTrident\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},b={ANDROID:/\bAndroid\b/,IPAD:/\biPad\b/,IPHONE:/\biPhone\b/,IPOD:/\biPod\b/,BLACKBERRY:/\bblackberry\b/,FIREFOXOS:{and:[/\bFirefox\b/,/\bMobile\b/]},WINDOWSPHONE:/\bIEMobile\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},I=e.navigator.userAgent,a={raw:{userAgent:I,os:{},browser:{},device:{}}};return a.raw.os=Object.keys(r).reduce(function(e,n){return e[r[n]]=o(I,t[n]),e},{}),a.raw.browser=Object.keys(i).reduce(function(e,n){return e[i[n]]=o(I,O[n]),e},{}),a.raw.device=Object.keys(n).reduce(function(e,i){return e[n[i]]=o(I,b[i]),e},{}),a.os=[r.WINDOWS,r.IOS,r.MAC,r.ANDROID,r.LINUX,r.UNIX,r.FIREFOXOS,r.WINDOWSPHONE,r.PS4,r.VITA].reduce(function(e,n){return e===r.UNKNOWN&&a.raw.os[n]?n:e},r.UNKNOWN),a.browser=[i.CHROME,i.FIREFOX,i.SAFARI,i.OPERA,i.IE,i.PS4,i.VITA].reduce(function(e,n){return e===i.UNKNOWN&&a.raw.browser[n]?n:e},i.UNKNOWN),a.device=[n.ANDROID,n.IPAD,n.IPHONE,n.IPOD,n.BLACKBERRY,n.FIREFOXOS,n.WINDOWSPHONE,n.PS4,n.VITA].reduce(function(e,i){return e===n.UNKNOWN&&a.raw.device[i]?i:e},n.UNKNOWN),a.isMobile=function(){return[n.ANDROID,n.IPAD,n.IPHONE,n.IPOD,n.BLACKBERRY,n.FIREFOXOS,n.WINDOWSPHONE,n.VITA].some(function(e){return a.device==e})},a.isTablet=function(){return[n.IPAD,n.FIREFOXOS].some(function(e){return a.device==e})},a.isDesktop=function(){return[n.PS4,n.UNKNOWN].some(function(e){return a.device==e})},a}]).directive("deviceDetector",["deviceDetector",function(e){return{restrict:"A",link:function(n,i){i.addClass("os-"+e.os),i.addClass("browser-"+e.browser),i.addClass("device-"+e.device)}}}])}(angular);